version: '3.8'

services:
  thrillring-gaming:
    build:
      context: .
      dockerfile: brands/thrillring/frontend/Dockerfile
      args:
        - SERVICE_PATH=brands/thrillring/frontend
        - NEXT_PUBLIC_API_URL=https://api.bizoholic.net
        - NEXT_PUBLIC_BRAIN_API_URL=https://api.bizoholic.net
        - NEXT_PUBLIC_GRAPHQL_URL=https://api.bizoholic.net/graphql
        - NEXT_PUBLIC_WAGTAIL_URL=https://api.bizoholic.net
    container_name: thrillring-gaming
    environment:
      - PORT=3007
      - NEXT_PUBLIC_API_URL=https://api.bizoholic.net
      - NEXT_PUBLIC_BRAIN_API_URL=https://api.bizoholic.net
      - NEXT_PUBLIC_GRAPHQL_URL=https://api.bizoholic.net/graphql
      - NEXT_PUBLIC_WAGTAIL_URL=https://api.bizoholic.net
      - NODE_ENV=production
    networks:
      - bizosaas-network
      - dokploy-network
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.25'
    labels:
      - "traefik.enable=true"
      - "traefik.docker.network=dokploy-network"
      - "traefik.http.routers.thrillring-gaming.rule=Host(`thrillring.com`) || Host(`www.thrillring.com`) || Host(`gaming.thrillring.com`) || Host(`thrillring.bizoholic.net`)"
      - "traefik.http.routers.thrillring-gaming.entrypoints=websecure"
      - "traefik.http.routers.thrillring-gaming.tls=true"
      - "traefik.http.routers.thrillring-gaming.tls.certresolver=letsencrypt"
      - "traefik.http.services.thrillring-gaming.loadbalancer.server.port=3007"

networks:
  bizosaas-network:
    external: true
  dokploy-network:
    external: true
    name: dokploy-network
