{
  "overall_status": "FAIL",
  "summary": {
    "passed": 4,
    "partial": 1,
    "failed": 2,
    "errors": 0,
    "duration": 1.1790213584899902
  },
  "detailed_results": [
    {
      "test": "health_check",
      "status": "PASS",
      "response_code": 200,
      "response_data": {
        "status": "healthy",
        "service": "api-gateway-multitenant",
        "version": "2.0.0",
        "timestamp": "2025-09-09T05:39:00.112278"
      },
      "error": null
    },
    {
      "test": "tier_configuration",
      "status": "PASS",
      "tiers_found": [
        "tier_1",
        "tier_2",
        "tier_3"
      ],
      "tier_details": {
        "tiers": {
          "tier_1": {
            "name": "Static Site Tier",
            "price": 97,
            "allowed_services": [
              "wagtail-cms"
            ],
            "allowed_routes": [
              "/api/v2/pages",
              "/cms/pages"
            ],
            "rate_limit": {
              "requests": 1000,
              "window": 3600
            },
            "features": [
              "static_sites",
              "basic_cms"
            ],
            "description": "Perfect for static websites and basic content management"
          },
          "tier_2": {
            "name": "Dynamic CMS Tier",
            "price": 297,
            "allowed_services": [
              "wagtail-cms",
              "ai-agents",
              "business-directory"
            ],
            "allowed_routes": [
              "/api/v2/pages",
              "/api/v2/documents",
              "/api/v2/images",
              "/cms/*",
              "/agents/content",
              "/agents/seo",
              "/directory/*"
            ],
            "rate_limit": {
              "requests": 5000,
              "window": 3600
            },
            "features": [
              "dynamic_cms",
              "ai_content",
              "seo_tools",
              "directory_listing"
            ],
            "description": "Dynamic websites with AI-powered content and SEO tools"
          },
          "tier_3": {
            "name": "Full Platform Tier",
            "price": 997,
            "allowed_services": [
              "wagtail-cms",
              "saleor-commerce",
              "ai-agents",
              "business-directory",
              "analytics",
              "integration",
              "campaign-management",
              "notification"
            ],
            "allowed_routes": [
              "*"
            ],
            "rate_limit": {
              "requests": 20000,
              "window": 3600
            },
            "features": [
              "full_cms",
              "ecommerce",
              "ai_agents",
              "analytics",
              "integrations",
              "custom_domains",
              "campaign_management",
              "advanced_notifications"
            ],
            "description": "Complete marketing automation platform with e-commerce"
          }
        },
        "default_tier": "tier_1",
        "timestamp": "2025-09-09T05:39:00.191946"
      }
    },
    {
      "test": "tenant_isolation",
      "status": "PASS",
      "test_cases": [
        {
          "case": "subdomain_extraction",
          "expected": "client1",
          "actual": "client1",
          "status": "PASS"
        },
        {
          "case": "header_extraction",
          "expected": "tenant123",
          "actual": "tenant123",
          "status": "PASS"
        },
        {
          "case": "query_param_extraction",
          "expected": "param_tenant",
          "actual": "param_tenant",
          "status": "PASS"
        }
      ]
    },
    {
      "test": "tier_based_access_control",
      "status": "PASS",
      "results": [
        {
          "tier": "tier_1",
          "allowed_tests": [
            {
              "path": "/cms/pages",
              "status": "PASS",
              "response_code": 503
            }
          ],
          "forbidden_tests": [
            {
              "path": "/commerce/products",
              "status": "FAIL",
              "response_code": 502
            },
            {
              "path": "/agents/tasks",
              "status": "FAIL",
              "response_code": 401
            }
          ]
        },
        {
          "tier": "tier_2",
          "allowed_tests": [
            {
              "path": "/cms/pages",
              "status": "PASS",
              "response_code": 503
            },
            {
              "path": "/directory/search",
              "status": "PASS",
              "response_code": 502
            }
          ],
          "forbidden_tests": [
            {
              "path": "/commerce/orders",
              "status": "FAIL",
              "response_code": 502
            }
          ]
        },
        {
          "tier": "tier_3",
          "allowed_tests": [
            {
              "path": "/cms/pages",
              "status": "PASS",
              "response_code": 503
            },
            {
              "path": "/commerce/products",
              "status": "PASS",
              "response_code": 502
            },
            {
              "path": "/directory/search",
              "status": "PASS",
              "response_code": 502
            }
          ],
          "forbidden_tests": []
        }
      ],
      "note": "Manual review needed for actual access patterns"
    },
    {
      "test": "service_routing",
      "status": "PARTIAL",
      "routing_tests": [
        {
          "test": "wagtail_cms_routing",
          "path": "/cms/pages",
          "expected_service": "wagtail-cms",
          "routed_to": null,
          "status": "FAIL",
          "response_code": 503
        },
        {
          "test": "saleor_commerce_routing",
          "path": "/commerce/products",
          "expected_service": "saleor-commerce",
          "routed_to": null,
          "status": "FAIL",
          "response_code": 502
        },
        {
          "test": "business_directory_routing",
          "path": "/directory/search",
          "expected_service": "business-directory",
          "routed_to": null,
          "status": "FAIL",
          "response_code": 502
        }
      ]
    },
    {
      "test": "enhanced_metrics",
      "status": "FAIL",
      "error": "Metrics endpoint failed: 404"
    },
    {
      "test": "gateway_configuration",
      "status": "FAIL",
      "error": "Config endpoint failed: 404"
    }
  ]
}