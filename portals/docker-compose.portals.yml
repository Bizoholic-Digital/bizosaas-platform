services:
  # Client Portal
  client-portal:
    build: ./client-portal
    container_name: bizosaas-client-portal-3003
    ports:
      - "3003:3003"
    environment:
      - PORT=3003
      - NEXT_PUBLIC_API_URL=http://brain-gateway:8001
    networks:
      - bizosaas-network
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.3'

  # Admin Dashboard
  admin-portal:
    build: ./admin-portal
    container_name: bizosaas-admin-3009
    ports:
      - "3009:3009"
    environment:
      - PORT=3009
      - NEXT_PUBLIC_API_URL=http://brain-gateway:8001
    networks:
      - bizosaas-network
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.3'

  # Business Directory Frontend
  business-directory:
    build: ./business-directory
    container_name: bizosaas-business-directory-3004
    ports:
      - "3004:3004"
    environment:
      - PORT=3004
      - NEXT_PUBLIC_API_URL=http://brain-gateway:8001
    networks:
      - bizosaas-network

networks:
  bizosaas-network:
    external: true
