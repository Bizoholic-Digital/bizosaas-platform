services:
  authentik-server:
    image: ghcr.io/goauthentik/server:2025.12.1
    restart: unless-stopped
    command: server
    environment:
      - AUTHENTIK_POSTGRESQL__HOST=dokploy-postgres
      - AUTHENTIK_POSTGRESQL__NAME=authentik
      - AUTHENTIK_POSTGRESQL__USER=authentik
      - AUTHENTIK_POSTGRESQL__PASSWORD=AuthentikDB2025!Secure
      - AUTHENTIK_POSTGRESQL__PORT=5432
      - AUTHENTIK_REDIS__HOST=dokploy-redis
      - AUTHENTIK_REDIS__PORT=6379
      - AUTHENTIK_SECRET_KEY=BizOSaaS2025!AuthentikSecretKey!SuperSecure!Random
      - AUTHENTIK_BOOTSTRAP_PASSWORD=Bizoholic2025!Admin
      - AUTHENTIK_BOOTSTRAP_TOKEN=bizoholic-token-2025
      - AUTHENTIK_LOG_LEVEL=info
    volumes:
      - authentik-media:/media
      - authentik-custom-templates:/templates
    networks:
      - dokploy-network
  authentik-worker:
    image: ghcr.io/goauthentik/server:2025.12.1
    restart: unless-stopped
    command: worker
    environment:
      - AUTHENTIK_POSTGRESQL__HOST=dokploy-postgres
      - AUTHENTIK_POSTGRESQL__NAME=authentik
      - AUTHENTIK_POSTGRESQL__USER=authentik
      - AUTHENTIK_POSTGRESQL__PASSWORD=AuthentikDB2025!Secure
      - AUTHENTIK_POSTGRESQL__PORT=5432
      - AUTHENTIK_REDIS__HOST=dokploy-redis
      - AUTHENTIK_REDIS__PORT=6379
      - AUTHENTIK_REDIS__DB=0
      - AUTHENTIK_SECRET_KEY=BizOSaaS2025!AuthentikSecretKey!SuperSecure!Random
      - AUTHENTIK_LOG_LEVEL=info
    volumes:
      - authentik-media:/media
      - authentik-certs:/certs
      - authentik-custom-templates:/templates
    networks:
      - dokploy-network

volumes:
  authentik-media:
    driver: local
  authentik-certs:
    driver: local
  authentik-custom-templates:
    driver: local

networks:
  dokploy-network:
    external: true
    name: dokploy-network
